(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["66aa2866"],{"088f":function(t,e,r){},"285c":function(t,e,r){},"37c8":function(t,e,r){e.f=r("2b4c")},"3a72":function(t,e,r){var a=r("7726"),n=r("8378"),i=r("2d00"),s=r("37c8"),o=r("86cc").f;t.exports=function(t){var e=n.Symbol||(n.Symbol=i?{}:a.Symbol||{});"_"==t.charAt(0)||t in e||o(e,t,{value:s.f(t)})}},"469d":function(t,e,r){"use strict";r("6762"),r("2fdb"),r("7514"),r("ac6a"),r("cadf");var a=r("2ef0"),n=r.n(a),i=r("c1df"),s=r.n(i),o=r("2b0e");e["a"]={computed:{gekkos:function(){return this.$store.state.gekkos.gekkos},stratrunners:function(){return n.a.values(this.$store.getters["gekkos/list"]).concat(n.a.values(this.$store.getters["gekkos/archive"])).filter(function(t){return"papertrader"===t.logType||"tradebot"===t.logType})},watchers:function(){return n.a.values(this.$store.getters["gekkos/list"]).concat(n.a.values(this.$store.getters["gekkos/archive"])).filter(function(t){return"watcher"===t.logType})},watchConfig:function(){var t=n.a.pick(this.config,"watch","candleWriter"),e=o["a"].util.extend({},t);return e.type="market watcher",e.mode="realtime",e},requiredHistoricalData:function(){if(this.config.tradingAdvisor&&this.config.valid){var t=this.config.tradingAdvisor;return t.candleSize*t.historySize}},gekkoConfig:function(){var t;if(this.existingMarketWatcher){if(this.requiredHistoricalData){var e=s()().utc().startOf("minute").subtract(this.requiredHistoricalData,"minutes").unix(),r=s.a.utc(this.existingMarketWatcher.events.initial.candle.start).unix();t=s.a.unix(Math.max(e,r)).utc().format()}else t=s()().utc().startOf("minute").format();var a=o["a"].util.extend({market:{type:"leech",from:t},mode:"realtime"},this.config);return a}},existingMarketWatcher:function(){var t=o["a"].util.extend({},this.watchConfig.watch);return n.a.find(this.gekkos,{config:{watch:t}})},exchange:function(){return this.watchConfig.watch.exchange},existingTradebot:function(){var t=this;return n.a.find(this.gekkos,function(e){return"tradebot"===e.logType&&e.config.watch.exchange===t.exchange})},availableApiKeys:function(){return this.$store.state.config.apiKeys}},watch:{existingMarketWatcher:function(t,e){var r=this;if(this.pendingStratrunner){var a=this.existingMarketWatcher;a.events.latest.candle&&(this.pendingStratrunner=!1,this.startGekko().then(function(t){return r.routeToGekko(null,t.data)}).catch(function(t){return r.routeToGekko(t,resp.data)}))}}},methods:{updateConfig:function(t){this.config=t},start:function(){var t=this;if("tradebot"===this.config.type||this.config.type.label&&"tradebot"===this.config.type.label.toLowerCase()){if(this.existingTradebot){var e="You already have a tradebot running on this exchange";return e+=", you can only run one tradebot per exchange.",this.$q.dialog({title:"Bot already running",color:"warning",message:e})}if(!this.availableApiKeys.includes(this.exchange))return this.$q.dialog({title:"No API Keys found",color:"warning",message:"Please first configure API keys for this exchange in the config page."})}"market watcher"===this.config.type||this.config.type.label&&"market watcher"===this.config.type.label.toLowerCase()?this.existingMarketWatcher?(this.$q.dialog({title:"Market is already being watched",message:"This market is already being watched, redirecting you now..."}),this.$router.push({path:"/live-gekkos/".concat(this.existingMarketWatcher.id)})):this.startWatcher().then(function(e){t.$q.notify({type:"positive",message:"Watcher sucessfully started."}),t.$router.push({path:"/live-gekkos/".concat(e.data.id)})}).catch(function(e){t.$q.notify({type:"negative",message:"Error while starting market watcher."})}):this.existingMarketWatcher?this.startGekko().then(function(e){return t.routeToGekko(null,e.data)}).catch(function(e){return t.routeToGekko(e,resp.data)}):this.startWatcher().then(function(e){t.pendingStratrunner=e.data.id,t.$q.notify({type:"positive",message:"Watcher sucessfully started."})})},routeToGekko:function(t,e){if(t||e.error)return this.$q.notify({type:"negative",message:"Error while starting live gekko."}),console.error(t,e.error);this.$router.push({path:"/live-gekkos/".concat(e.id)})},startWatcher:function(){return this.$axios.post(this.$store.state.config.apiBaseUrl+"startGekko",this.watchConfig)},startGekko:function(){return this.$axios.post(this.$store.state.config.apiBaseUrl+"startGekko",this.gekkoConfig)}}}},"67ab":function(t,e,r){var a=r("ca5a")("meta"),n=r("d3f4"),i=r("69a8"),s=r("86cc").f,o=0,c=Object.isExtensible||function(){return!0},l=!r("79e5")(function(){return c(Object.preventExtensions({}))}),u=function(t){s(t,a,{value:{i:"O"+ ++o,w:{}}})},d=function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,a)){if(!c(t))return"F";if(!e)return"E";u(t)}return t[a].i},f=function(t,e){if(!i(t,a)){if(!c(t))return!0;if(!e)return!1;u(t)}return t[a].w},h=function(t){return l&&p.NEED&&c(t)&&!i(t,a)&&u(t),t},p=t.exports={KEY:a,NEED:!1,fastKey:d,getWeak:f,onFreeze:h}},"7bbc":function(t,e,r){var a=r("6821"),n=r("9093").f,i={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(t){try{return n(t)}catch(t){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==i.call(t)?o(t):n(a(t))}},"8a81":function(t,e,r){"use strict";var a=r("7726"),n=r("69a8"),i=r("9e1e"),s=r("5ca1"),o=r("2aba"),c=r("67ab").KEY,l=r("79e5"),u=r("5537"),d=r("7f20"),f=r("ca5a"),h=r("2b4c"),p=r("37c8"),m=r("3a72"),g=r("d4c0"),v=r("1169"),b=r("cb7c"),y=r("d3f4"),w=r("6821"),k=r("6a99"),x=r("4630"),S=r("2aeb"),_=r("7bbc"),C=r("11e9"),P=r("86cc"),T=r("0d58"),E=C.f,R=P.f,$=_.f,q=a.Symbol,z=a.JSON,F=z&&z.stringify,j="prototype",D=h("_hidden"),A=h("toPrimitive"),O={}.propertyIsEnumerable,U=u("symbol-registry"),W=u("symbols"),B=u("op-symbols"),M=Object[j],Y="function"==typeof q,N=a.QObject,V=!N||!N[j]||!N[j].findChild,L=i&&l(function(){return 7!=S(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(t,e,r){var a=E(M,e);a&&delete M[e],R(t,e,r),a&&t!==M&&R(M,e,a)}:R,G=function(t){var e=W[t]=S(q[j]);return e._k=t,e},H=Y&&"symbol"==typeof q.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof q},I=function(t,e,r){return t===M&&I(B,e,r),b(t),e=k(e,!0),b(r),n(W,e)?(r.enumerable?(n(t,D)&&t[D][e]&&(t[D][e]=!1),r=S(r,{enumerable:x(0,!1)})):(n(t,D)||R(t,D,x(1,{})),t[D][e]=!0),L(t,e,r)):R(t,e,r)},J=function(t,e){b(t);var r,a=g(e=w(e)),n=0,i=a.length;while(i>n)I(t,r=a[n++],e[r]);return t},K=function(t,e){return void 0===e?S(t):J(S(t),e)},X=function(t){var e=O.call(this,t=k(t,!0));return!(this===M&&n(W,t)&&!n(B,t))&&(!(e||!n(this,t)||!n(W,t)||n(this,D)&&this[D][t])||e)},Q=function(t,e){if(t=w(t),e=k(e,!0),t!==M||!n(W,e)||n(B,e)){var r=E(t,e);return!r||!n(W,e)||n(t,D)&&t[D][e]||(r.enumerable=!0),r}},Z=function(t){var e,r=$(w(t)),a=[],i=0;while(r.length>i)n(W,e=r[i++])||e==D||e==c||a.push(e);return a},tt=function(t){var e,r=t===M,a=$(r?B:w(t)),i=[],s=0;while(a.length>s)!n(W,e=a[s++])||r&&!n(M,e)||i.push(W[e]);return i};Y||(q=function(){if(this instanceof q)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(r){this===M&&e.call(B,r),n(this,D)&&n(this[D],t)&&(this[D][t]=!1),L(this,t,x(1,r))};return i&&V&&L(M,t,{configurable:!0,set:e}),G(t)},o(q[j],"toString",function(){return this._k}),C.f=Q,P.f=I,r("9093").f=_.f=Z,r("52a7").f=X,r("2621").f=tt,i&&!r("2d00")&&o(M,"propertyIsEnumerable",X,!0),p.f=function(t){return G(h(t))}),s(s.G+s.W+s.F*!Y,{Symbol:q});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;et.length>rt;)h(et[rt++]);for(var at=T(h.store),nt=0;at.length>nt;)m(at[nt++]);s(s.S+s.F*!Y,"Symbol",{for:function(t){return n(U,t+="")?U[t]:U[t]=q(t)},keyFor:function(t){if(!H(t))throw TypeError(t+" is not a symbol!");for(var e in U)if(U[e]===t)return e},useSetter:function(){V=!0},useSimple:function(){V=!1}}),s(s.S+s.F*!Y,"Object",{create:K,defineProperty:I,defineProperties:J,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),z&&s(s.S+s.F*(!Y||l(function(){var t=q();return"[null]"!=F([t])||"{}"!=F({a:t})||"{}"!=F(Object(t))})),"JSON",{stringify:function(t){var e,r,a=[t],n=1;while(arguments.length>n)a.push(arguments[n++]);if(r=e=a[1],(y(e)||void 0!==t)&&!H(t))return v(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!H(e))return e}),a[1]=e,F.apply(z,a)}}),q[j][A]||r("32e9")(q[j],A,q[j].valueOf),d(q,"Symbol"),d(Math,"Math",!0),d(a.JSON,"JSON",!0)},ac4d:function(t,e,r){r("3a72")("asyncIterator")},ae5a:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),r("div",{staticClass:"row gutter-md"},[r("div",{staticClass:"col"},[r("q-btn",{attrs:{color:"primary"},on:{click:function(e){return e.preventDefault(),t.switchToggle(e)}}},[t._v("Change paper trader settings")])],1),r("div",{staticClass:"col"},["open"===t.toggle?r("q-field",{staticClass:"q-mt-md",attrs:{label:"Settings",orientation:"vertical",error:!!t.rawPaperTraderParamsError,"error-label":t.rawPaperTraderParamsError.message,helper:"adjust you paper trader settings here..."}},[r("q-input",{attrs:{type:"textarea",rows:"8","max-height":80,inverted:!!t.rawPaperTraderParamsError},model:{value:t.rawPaperTraderParams,callback:function(e){t.rawPaperTraderParams=e},expression:"rawPaperTraderParams"}})],1):t._e()],1)])])},n=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("h4",[t._v("Paper Trader")])])}];a._withStripped=!0;r("2ef0");var i={created:function(){var t=this;this.$axios.get(this.$store.state.config.apiBaseUrl+"configPart/paperTrader").then(function(e){t.rawPaperTraderParams=e.data.part}).catch(function(e){t.$q.notify({type:"negative",message:"Error getting Perfomance-Analyser config from server."})})},data:function(){return{rawPaperTraderParams:"",rawPaperTraderParamsError:!1,paperTraderParams:{},toggle:"closed"}},watch:{rawPaperTraderParams:function(){this.emitConfig()}},methods:{switchToggle:function(){"open"===this.toggle?this.toggle="closed":this.toggle="open"},emitConfig:function(){this.parseParams(),this.$emit("settings",this.paperTraderParams)},parseParams:function(){try{this.paperTraderParams=toml.parse(this.rawPaperTraderParams),this.paperTraderParams.reportRoundtrips=!0,this.rawPaperTraderParamsError=!1}catch(t){this.rawPaperTraderParamsError=t,this.paperTraderParams={}}}}},s=i,o=r("2877"),c=Object(o["a"])(s,a,n,!1,null,null,null);c.options.__file="papertrader.vue";e["a"]=c.exports},aeb1:function(t,e,r){var a,n,i;(function(r,s){n=[],a=s,i="function"===typeof a?a.apply(e,n):a,void 0===i||(t.exports=i)})(0,function(){return function t(e,r,a){var n,i,s=window,o="application/octet-stream",c=a||o,l=e,u=!r&&!a&&l,d=document.createElement("a"),f=function(t){return String(t)},h=s.Blob||s.MozBlob||s.WebKitBlob||f,p=r||"download";if(h=h.call?h.bind(s):Blob,"true"===String(this)&&(l=[l,c],c=l[0],l=l[1]),u&&u.length<2048&&(p=u.split("/").pop().split("?")[0],d.href=u,-1!==d.href.indexOf(u))){var m=new XMLHttpRequest;return m.open("GET",u,!0),m.responseType="blob",m.onload=function(e){t(e.target.response,p,o)},setTimeout(function(){m.send()},0),m}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(l)){if(!(l.length>2096103.424&&h!==f))return navigator.msSaveBlob?navigator.msSaveBlob(y(l),p):w(l);l=y(l),c=l.type||o}else if(/([\x80-\xff])/.test(l)){var g=0,v=new Uint8Array(l.length),b=v.length;for(g;g<b;++g)v[g]=l.charCodeAt(g);l=new h([v],{type:c})}function y(t){var e=t.split(/[:;,]/),r=e[1],a="base64"==e[2]?atob:decodeURIComponent,n=a(e.pop()),i=n.length,s=0,o=new Uint8Array(i);for(s;s<i;++s)o[s]=n.charCodeAt(s);return new h([o],{type:r})}function w(t,e){if("download"in d)return d.href=t,d.setAttribute("download",p),d.className="download-js-link",d.innerHTML="downloading...",d.style.display="none",document.body.appendChild(d),setTimeout(function(){d.click(),document.body.removeChild(d),!0===e&&setTimeout(function(){s.URL.revokeObjectURL(d.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,o)),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var r=document.createElement("iframe");document.body.appendChild(r),!e&&/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,o)),r.src=t,setTimeout(function(){document.body.removeChild(r)},333)}if(n=l instanceof h?l:new h([l],{type:c}),navigator.msSaveBlob)return navigator.msSaveBlob(n,p);if(s.URL)w(s.URL.createObjectURL(n),!0);else{if("string"===typeof n||n.constructor===f)try{return w("data:"+c+";base64,"+s.btoa(n))}catch(t){return w("data:"+c+","+encodeURIComponent(n))}i=new FileReader,i.onload=function(t){w(this.result)},i.readAsDataURL(n)}return!0}})},aed3:function(t,e,r){"use strict";var a=r("088f"),n=r.n(a);n.a},c41d:function(t,e,r){"use strict";r("55dd"),r("ac6a");var a=r("af47"),n=r("c1df"),i=r.n(n),s=r("8f14"),o=r.n(s),c={data:function(){return{datasets:[],datasetScanstate:"idle",unscannableMakets:[],tblColumns:[{name:"exchange",label:"Exchange",field:"exchange",sortable:!0},{name:"currency",label:"Currency",field:"currency",sortable:!0},{name:"asset",label:"Asset",field:"asset",sortable:!0},{name:"from",label:"From",field:function(t){return i.a.utc(t.from).format("YYYY-MM-DD hh:mm")},sortable:!0},{name:"to",label:"To",field:function(t){return i.a.utc(t.to).format("YYYY-MM-DD hh:mm")},sortable:!0},{name:"duration",label:"Duration",field:function(t){return o()(t.to.diff(t.from))},sortable:!1}]}},methods:{scan:function(){var t=this;this.datasetScanstate="scanning",this.$axios.post(a["a"]+"scansets",{}).then(function(e){var r=e.data;t.datasetScanstate="scanned",t.unscannableMakets=r.errors;var a=[];r.datasets.forEach(function(t){t.ranges.forEach(function(e,r){a.push({exchange:t.exchange,currency:t.currency,asset:t.asset,from:i.a.unix(e.from).utc(),to:i.a.unix(e.to).utc(),id:t.exchange+t.asset+t.currency+r})})}),a=a.filter(function(t){if(t.to.diff(t.from,"hours")>2)return!0}),a=a.sort(function(t,e){var r=t.to.diff(t.from),a=e.to.diff(e.from);return r<a?-1:r>a?1:0}).reverse(),t.datasets=a}).catch(function(e){t.$q.notify({type:"negative",message:"Error getting scan data from API"})})}}};e["a"]=c},cc88:function(t,e,r){"use strict";var a=r("285c"),n=r.n(a);n.a},d4c0:function(t,e,r){var a=r("0d58"),n=r("2621"),i=r("52a7");t.exports=function(t){var e=a(t),r=n.f;if(r){var s,o=r(t),c=i.f,l=0;while(o.length>l)c.call(t,s=o[l++])&&e.push(s)}return e}},e969:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),r("div",{staticClass:"row gutter-xs"},[r("div",{staticClass:"col"},[r("q-field",{attrs:{label:"Strategy",orientation:"vertical",helper:"Pick a strategy","label-width":2}},[r("q-select",{attrs:{filter:"","autofocus-filter":"",options:t.strategiesForList},model:{value:t.strategy,callback:function(e){t.strategy=e},expression:"strategy"}})],1),r("div",{staticClass:"row q-mt-md gutter-xs"},[r("q-field",{staticClass:"col",attrs:{label:"Candle Size",orientation:"vertical",helper:"input a candle size"}},[r("q-input",{attrs:{type:"number"},model:{value:t.rawCandleSize,callback:function(e){t.rawCandleSize=e},expression:"rawCandleSize"}})],1),r("q-field",{staticClass:"col",attrs:{label:"Unit",orientation:"vertical",helper:"Candlesize unit","label-width":2}},[r("q-select",{attrs:{options:t.candleSizeUnits},model:{value:t.candleSizeUnit,callback:function(e){t.candleSizeUnit=e},expression:"candleSizeUnit"}})],1)],1),r("q-field",{attrs:{label:"Warmup period (in "+t.rawCandleSize+" "+t.singularCandleSizeUnit+" candles):",orientation:"vertical",helper:"(will use "+t.warmupHumanized+" of data as history)"}},[r("q-input",{attrs:{type:"number"},model:{value:t.historySize,callback:function(e){t.historySize=e},expression:"historySize"}})],1)],1),r("div",{staticClass:"col"},[r("q-field",{attrs:{label:t.strategy+" Parameters:",orientation:"vertical",error:!!t.rawStratParamsError,"error-label":t.rawStratParamsError.message,helper:"Adjust parameters here"}},[r("q-input",{attrs:{type:"textarea",rows:"10","max-height":100,inverted:!!t.rawStratParamsError},model:{value:t.rawStratParams,callback:function(e){t.rawStratParams=e},expression:"rawStratParams"}})],1)],1)])])},n=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row gutter-xs"},[r("div",{staticClass:"col"},[r("h4",[t._v("Strategy")])]),r("div",{staticClass:"col"},[r("h4",[t._v("Parameters")])])])}];a._withStripped=!0;r("7514");var i=r("2ef0"),s=r.n(i),o=r("8f14"),c=r.n(o),l=(r("7f7f"),r("af47")),u={data:function(){return{strategies:[]}},computed:{strategiesForList:function(){return s.a.map(this.strategies,function(t){return{value:t.name,label:t.name}})}},methods:{getStrategies:function(){var t=this;this.$axios.get(l["a"]+"strategies").then(function(e){t.strategies=e.data,s.a.each(t.strategies,function(t){t.empty=""===t.params}),t.rawStratParams=s.a.find(t.strategies,{name:t.strategy}).params,t.emptyStrat=s.a.find(t.strategies,{name:t.strategy}).empty,t.emitConfig()}).catch(function(e){t.$q.notify({type:"negative",message:"Error getting strategies from server."})})}}},d={mixins:[u],data:function(){return{candleSizeUnits:[{label:"minutes",value:"minutes"},{label:"hours",value:"hours"},{label:"days",value:"days"}],candleSizeUnit:"hours",rawCandleSize:1,strategy:"MACD",historySize:10,rawStratParams:"",rawStratParamsError:!1,emptyStrat:!1,stratParams:{}}},created:function(){this.getStrategies()},watch:{strategy:function(t){t=s.a.find(this.strategies,{name:t}),this.rawStratParams=t.params,this.emptyStrat=t.empty,this.emitConfig()},candleSize:function(){this.emitConfig()},historySize:function(){this.emitConfig()},rawStratParams:function(){this.emitConfig()}},computed:{warmupHumanized:function(){return c()(this.candleSize*this.historySize*1e3*60)},candleSize:function(){return"minutes"===this.candleSizeUnit?this.rawCandleSize:"hours"===this.candleSizeUnit?60*this.rawCandleSize:"days"===this.candleSizeUnit?60*this.rawCandleSize*24:void 0},singularCandleSizeUnit:function(){return this.candleSizeUnit.slice(0,-1)},config:function(){var t={tradingAdvisor:{enabled:!0,method:this.strategy,candleSize:+this.candleSize,historySize:+this.historySize}};return this.emptyStrat?t[this.strategy]={__empty:!0}:t[this.strategy]=this.stratParams,t}},methods:{emitConfig:function(){this.parseParams(),this.$emit("stratConfig",this.config)},parseParams:function(){try{this.stratParams=toml.parse(this.rawStratParams),this.rawStratParamsError=!1}catch(t){this.rawStratParamsError=t,this.stratParams={}}}}},f=d,h=r("2877"),p=Object(h["a"])(f,a,n,!1,null,null,null);p.options.__file="stratpicker.vue";e["a"]=p.exports},eb64:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-page",{attrs:{padding:""}},[r("backtester")],1)},n=[];a._withStripped=!0;var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h3",{staticClass:"q-mb-xs"},[t._v("Backtest")]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("config-builder",{on:{config:t.check}})],1)]),t.backtestable?r("div",{staticClass:"row justify-center q-mt-md"},[r("q-btn",{attrs:{color:"primary",loading:"fetching"===t.backtestState,disabled:"fetching"===t.backtestState},on:{click:function(e){return e.preventDefault(),t.run(e)}}},[t._v("Backtest")])],1):t._e(),t.backtestable?r("div",{staticClass:"row justify-center q-mt-md"},["fetching"===t.backtestState?r("div",{staticClass:"text-center"},[r("h4",[t._v("Running backtest...")]),r("q-spinner-bars",{attrs:{color:"secondary",size:"48px"}})],1):t._e()]):t._e(),t.backtestResult&&"fetched"===t.backtestState?r("result",{attrs:{result:t.backtestResult}}):t._e()],1)},s=[];i._withStripped=!0;var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("dataset-picker",{on:{dataset:t.updateDataset}}),r("strat-picker",{on:{stratConfig:t.updateStrat}}),r("paper-trader",{on:{settings:t.updatePaperTrader}})],1)},c=[];o._withStripped=!0;r("f751");var l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h4",[t._v("Select a dataset "+t._s(t.selectedText))]),"idle"===t.datasetScanstate?r("div",{staticClass:"text-center"},[r("q-btn",{attrs:{color:"primary"},on:{click:function(e){return e.preventDefault(),t.scan(e)}}},[t._v("Scan available data")])],1):t._e(),r("div",{staticClass:"text-center"},["scanning"===t.datasetScanstate?r("q-spinner-bars",{attrs:{color:"secondary",size:"48px"}}):t._e()],1),"scanned"===t.datasetScanstate?r("div",[t.datasets.length?r("q-table",{attrs:{title:"Local Datasets","row-key":"id",data:t.datasets,columns:t.tblColumns,dense:"",filter:t.dsFilter,selection:"single",selected:t.selectedRows,separator:"vertical"},on:{"update:selected":function(e){t.selectedRows=e}},scopedSlots:t._u([{key:"top-right",fn:function(e){return[r("q-search",{staticClass:"col-6",attrs:{"hide-underline":"",color:"secondary"},model:{value:t.dsFilter,callback:function(e){t.dsFilter=e},expression:"dsFilter"}})]}}])}):t._e(),t.datasets.length?r("div",{staticClass:"text-center q-pa-sm"},[r("q-btn",{staticClass:"q-ma-xs",attrs:{color:"primary",icon:"av timer",disabled:!this.selectedRow||0===this.selectedRow.length},on:{click:function(e){return e.preventDefault(),t.openRange(e)}}},[t._v("Adjust range")]),r("q-btn",{staticClass:"q-ma-xs",attrs:{color:"amber",icon:"refresh"},on:{click:function(e){return e.preventDefault(),t.scan(e)}}},[t._v("reload datasets")])],1):t._e(),t.rangeVisible?r("div",{staticClass:"row"},[r("p",{staticClass:"caption"},[t._v("Adjust the dataset range to your liking")])]):t._e(),t.rangeVisible?r("div",{staticClass:"row gutter-md"},[r("div",{staticClass:"col-6"},[r("q-field",{staticClass:"col-6",attrs:{label:"From:","label-width":1,orientation:"vertical"}},[r("q-datetime",{attrs:{min:t.minSelectableRange,max:t.maxSelectableRange,type:"datetime","format-model":"auto"},model:{value:t.customFrom,callback:function(e){t.customFrom=e},expression:"customFrom"}})],1)],1),r("div",{staticClass:"col-6"},[r("q-field",{attrs:{label:"To:","label-width":1,orientation:"vertical"}},[r("q-datetime",{attrs:{min:t.minSelectableRange,max:t.maxSelectableRange,type:"datetime"},model:{value:t.customTo,callback:function(e){t.customTo=e},expression:"customTo"}})],1)],1)]):t._e(),t.datasets.length?t._e():r("div",[r("em",[t._v("No Data found "),r("router-link",{attrs:{to:"data/importer"}},[t._v("Lets add some")])],1)])],1):t._e()])},u=[];l._withStripped=!0;var d=r("c1df"),f=r.n(d),h=r("2b0e"),p=r("c41d"),m={data:function(){return{customTo:!1,customFrom:!1,rangeVisible:!1,selectedRows:[],selectedRow:null,minSelectableRange:null,maxSelectableRange:null,dsFilter:""}},mixins:[p["a"]],computed:{isScanning:function(){return"scanning"===this.datasetScanstate},selectedText:function(){return this.selectedRow?"(current: ".concat(this.selectedRow.currency," - ").concat(this.selectedRow.asset,")"):""}},mounted:function(){this.scan()},methods:{fmt:function(t){return f()(t).utc().format("YYYY-MM-DD HH:mm")},openRange:function(){this.updateCustomRange(),this.rangeVisible=!0},updateCustomRange:function(){this.customTo=this.fmt(this.selectedRow.to),this.customFrom=this.fmt(this.selectedRow.from)},emitSet:function(t){var e;t&&(this.customTo?(e=h["a"].util.extend({},t),e.to=f.a.utc(this.customTo,"YYYY-MM-DD HH:mm").format(),e.from=f.a.utc(this.customFrom,"YYYY-MM-DD HH:mm").format()):e=t,this.$emit("dataset",e))}},watch:{selectedRows:function(t){t&&t.length&&(this.selectedRow=h["a"].util.extend({},this.selectedRows[0]),this.selectedRow.from=this.selectedRow.from.toDate(),this.selectedRow.to=this.selectedRow.to.toDate(),this.minSelectableRange=this.selectedRow.from,this.maxSelectableRange=this.selectedRow.to,this.updateCustomRange(),this.emitSet(this.selectedRow[0]))},customTo:function(){this.emitSet(this.selectedRow)},customFrom:function(){this.emitSet(this.selectedRow)}}},g=m,v=r("2877"),b=Object(v["a"])(g,l,u,!1,null,null,null);b.options.__file="datasetpicker.vue";var y=b.exports,w=r("e969"),k=r("ae5a"),x=r("2ef0"),S=r.n(x),C={created:function(){var t=this;this.$axios.get(this.$store.state.config.apiBaseUrl+"configPart/performanceAnalyzer").then(function(e){t.performanceAnalyzer=toml.parse(e.data.part),t.performanceAnalyzer.enabled=!0}).catch(function(e){t.$q.notify({type:"negative",message:"Error getting Perfomance-Analyser config from server."})})},data:function(){return{dataset:{},strat:{},paperTrader:{},performanceAnalyzer:{}}},components:{stratPicker:w["a"],datasetPicker:y,paperTrader:k["a"]},computed:{market:function(){return this.dataset.exchange?{exchange:this.dataset.exchange,currency:this.dataset.currency.toUpperCase(),asset:this.dataset.asset.toUpperCase()}:{}},range:function(){return this.dataset.exchange?{from:this.dataset.from,to:this.dataset.to}:{}},config:function(){var t={};return Object.assign(t,{watch:this.market},{paperTrader:this.paperTrader},this.strat,{backtest:{daterange:this.range},backtestResultExporter:{enabled:!0,writeToDisk:!1,data:{stratUpdates:!0,roundtrips:!0,stratCandles:!0,stratCandleProps:["open","close","high","low","vwp","volume"],trades:!0}}},{performanceAnalyzer:this.performanceAnalyzer}),t.valid=this.validConfig(t),t.backtestResultExporter.enabled=!0,t}},methods:{validConfig:function(t){if(!t.backtest)return!1;if(!t.backtest.daterange)return!1;if(S.a.isEmpty(t.backtest.daterange))return!1;if(!t.watch)return!1;if(!t.tradingAdvisor)return!1;var e=t.tradingAdvisor.method;if(S.a.isEmpty(t[e]))return!1;if(t.tradingAdvisor){if(S.a.isNaN(t.tradingAdvisor.candleSize))return!1;if(0===t.tradingAdvisor.candleSize)return!1}return!0},updateDataset:function(t){this.dataset=t,this.$emit("config",this.config)},updateStrat:function(t){this.strat=t,this.$emit("config",this.config)},updatePaperTrader:function(t){this.paperTrader=t,this.paperTrader.enabled=!0,this.$emit("config",this.config)}}},P=C,T=(r("cc88"),Object(v["a"])(P,o,c,!1,null,null,null));T.options.__file="backtestConfigBuilder.vue";var E=T.exports,R=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),r("div",[t.result&&t.result.performanceReport?r("result-summary",{attrs:{report:t.result.performanceReport}}):t._e()],1),r("div",[r("echart",{attrs:{candles:t.candles,trades:t.trades,indicators:t.indicators}})],1),r("div",{staticClass:"row justify-center"},[r("excel-json",{staticClass:"column q-pa-sm",attrs:{data:t.genExportable(),name:"Backtest-Result.csv",type:"csv"}},[r("q-btn",{attrs:{icon:"file download",label:"backtest CSV",color:"amber"}})],1),r("excel-json",{staticClass:"column q-pa-sm",attrs:{data:t.genExportable(),name:"Backtest-Result.xls",type:"xls"}},[r("q-btn",{attrs:{icon:"file download",label:"backtest XLS",color:"amber"}})],1),t.result.roundtrips&&t.result.roundtrips.length?r("excel-json",{staticClass:"column q-pa-sm",attrs:{data:t.result.roundtrips,name:"Backtest-Roundtrips.xls",type:"xls"}},[r("q-btn",{attrs:{icon:"file download",label:"roundtrips XLS",color:"teal"}})],1):t._e(),t.result.roundtrips&&t.result.roundtrips.length?r("excel-json",{staticClass:"column q-pa-sm",attrs:{data:t.result.roundtrips,name:"Backtest-Roundtrips.csv",type:"csv"}},[r("q-btn",{attrs:{icon:"file download",label:"roundtrips csv",color:"teal"}})],1):t._e()],1),r("div",[t.result&&t.result.performanceReport?r("roundtrip-table",{attrs:{roundtrips:t.result.roundtrips,asset:t.result.performanceReport.asset,currency:t.result.performanceReport.currency}}):t._e()],1)])},$=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h4",[t._v("Backtest result")])])}];R._withStripped=!0;r("7514");var q=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"row"},[r("div",{staticClass:"col-6"},[r("dl",{staticClass:"horizontal"},[r("dt",[t._v("Start time")]),r("dd",[t._v(t._s(t.report.startTime))]),r("dt",[t._v("End time")]),r("dd",[t._v(t._s(t.report.endTime))]),r("dt",[t._v("Timespan")]),r("dd",[t._v(t._s(t.report.timespan))]),r("dt",[t._v("Start price")]),r("dd",[t._v(t._s(t.report.startPrice)+" "+t._s(t.report.currency))]),r("dt",[t._v("End price")]),r("dd",[t._v(t._s(t.report.endPrice)+" "+t._s(t.report.currency))]),r("dt",[t._v("Market")]),r("dd",{staticClass:"text-weight-medium",class:{"text-negative":t.report.market<0,"text-positive":t.report.market>0}},[t._v(t._s(t.report.market.toFixed(6))+" %")])])]),r("div",{staticClass:"col-6"},[r("paper-trade-summary",{attrs:{report:t.report}})],1)])])},z=[];q._withStripped=!0;var F=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("dl",{staticClass:"horizontal"},[r("dt",[t._v("Amount of trades")]),r("dd",[t._v(t._s(t.report.trades))]),r("dt",[t._v("Sharpe ratio")]),r("dd",[t._v(t._s(t.round2(t.report.sharpe)))]),r("dt",[t._v("Start Balance")]),r("dd",[t._v(t._s(t.round(t.report.startBalance))+" "+t._s(t.report.currency))]),r("dt",[t._v("End Balance")]),r("dd",[t._v(t._s(t.round(t.report.balance))+" "+t._s(t.report.currency))]),r("dt",[t._v("Simulated profit")]),r("dd",{staticClass:"q-title",class:t.profitClass},[t._v(t._s(t.round(t.report.relativeProfit))+" %")])])},j=[];F._withStripped=!0;var D={props:["report"],methods:{round2:function(t){return(+t).toFixed(2)},round:function(t){return(+t).toFixed(5)}},computed:{profitClass:function(){return this.report.relativeProfit>0?"text-positive":"text-negative"}}},A=D,O=Object(v["a"])(A,F,j,!1,null,null,null);O.options.__file="paperTradeSummary.vue";var U=O.exports,W={props:["report"],components:{paperTradeSummary:U},methods:{round:function(t){return(+t).toFixed(5)}}},B=W,M=Object(v["a"])(B,q,z,!1,null,null,null);M.options.__file="summary.vue";var Y=M.exports,N=r("bdfd"),V=r("1a90"),L=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:t.idName},on:{click:t.generate}},[t._t("default",[t._v("\n\t\tDownload "+t._s(t.name)+"\n\t")])],2)},G=[];L._withStripped=!0;r("6aa2"),r("ac4d"),r("8a81"),r("28a5");var H=r("7037"),I=r.n(H),J=(r("4917"),r("ac6a"),r("cadf"),r("456d"),r("7f7f"),r("a481"),r("96cf"),r("c973")),K=r.n(J),X=r("aeb1"),Q=r.n(X),Z={props:{type:{type:String,default:"xls"},data:{type:Array,required:!1,default:null},fields:{type:Object,required:!1},exportFields:{type:Object,required:!1},defaultValue:{type:String,required:!1,default:""},title:{default:null},footer:{default:null},name:{type:String,default:"data.xls"},fetch:{type:Function},meta:{type:Array,default:function(){return[]}},worksheet:{type:String,default:"Sheet1"},beforeGenerate:{type:Function},beforeFinish:{type:Function}},computed:{idName:function(){var t=(new Date).getTime();return"export_"+t},downloadFields:function(){return void 0!==this.fields?this.fields:void 0!==this.exportFields?this.exportFields:void 0}},methods:{generate:function(){var t=K()(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if("function"!==typeof this.beforeGenerate){t.next=3;break}return t.next=3,this.beforeGenerate();case 3:if(e=this.data,"function"!==typeof this.fetch&&e){t.next=8;break}return t.next=7,this.fetch();case 7:e=t.sent;case 8:if(e&&e.length){t.next=10;break}return t.abrupt("return");case 10:if(r=this.getProcessedJson(e,this.downloadFields),"html"!==this.type){t.next=15;break}return t.abrupt("return",this.export(this.jsonToXLS(r),this.name.replace(".xls",".html"),"text/html"));case 15:if("csv"!==this.type){t.next=17;break}return t.abrupt("return",this.export(this.jsonToCSV(r),this.name.replace(".xls",".csv"),"application/csv"));case 17:return t.abrupt("return",this.export(this.jsonToXLS(r),this.name,"application/vnd.ms-excel"));case 18:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),export:function(){var t=K()(regeneratorRuntime.mark(function t(e,r,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=this.base64ToBlob(e,a),"function"!==typeof this.beforeFinish){t.next=4;break}return t.next=4,this.beforeFinish();case 4:Q()(n,r,a);case 5:case"end":return t.stop()}},t,this)}));return function(e,r,a){return t.apply(this,arguments)}}(),jsonToXLS:function(t){var e='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta name=ProgId content=Excel.Sheet> <meta name=Generator content="Microsoft Excel 11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>${worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e<style>br {mso-data-placement: same-cell;}</style></head><body><table>${table}</table></body></html>',r="<thead>",a=Object.keys(t[0]).length,n=this;for(var i in null!=this.title&&(r+=this.parseExtraData(this.title,'<tr><th colspan="'+a+'">${data}</th></tr>')),r+="<tr>",t[0])r+="<th>"+i+"</th>";return r+="</tr>",r+="</thead>",r+="<tbody>",t.map(function(t,e){for(var a in r+="<tr>",t)r+="<td>"+n.valueReformattedForMultilines(t[a])+"</td>";r+="</tr>"}),r+="</tbody>",null!=this.footer&&(r+="<tfoot>",r+=this.parseExtraData(this.footer,'<tr><td colspan="'+a+'">${data}</td></tr>'),r+="</tfoot>"),e.replace("${table}",r).replace("${worksheet}",this.worksheet)},jsonToCSV:function(t){var e=[];for(var r in null!=this.title&&e.push(this.parseExtraData(this.title,"${data}\r\n")),t[0])e.push(r),e.push(",");return e.pop(),e.push("\r\n"),t.map(function(t){for(var r in t){var a='="'+t[r]+'"';a.match(/[,"\n]/)&&(a='"'+a.replace(/\"/g,'""')+'"'),e.push(a),e.push(",")}e.pop(),e.push("\r\n")}),null!=this.footer&&e.push(this.parseExtraData(this.footer,"${data}\r\n")),e.join("")},getProcessedJson:function(t,e){var r=this.getKeys(t,e),a=[],n=this;return t.map(function(t,e){var i={};for(var s in r){var o=r[s];i[s]=n.getValue(o,t)}a.push(i)}),a},getKeys:function(t,e){if(e)return e;var r={};for(var a in t[0])r[a]=a;return r},parseExtraData:function(t,e){var r="";if(Array.isArray(t))for(var a=0;a<t.length;a++)r+=e.replace("${data}",t[a]);else r+=e.replace("${data}",t);return r},getValue:function(t,e){var r="object"!==I()(t)?t:t.field,a="string"!==typeof r?[]:r.split("."),n=this.defaultValue;return n=r?a.length>1?this.getValueFromNestedItem(e,a):this.parseValue(e[r]):e,t.hasOwnProperty("callback")&&(n=this.getValueFromCallback(n,t.callback)),n},valueReformattedForMultilines:function(t){return"string"==typeof t?t.replace(/\n/gi,"<br/>"):t},getValueFromNestedItem:function(t,e){var r=t,a=!0,n=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var c=s.value;r&&(r=r[c])}}catch(t){n=!0,i=t}finally{try{a||null==o.return||o.return()}finally{if(n)throw i}}return this.parseValue(r)},getValueFromCallback:function(t,e){if("function"!==typeof e)return this.defaultValue;var r=e(t);return this.parseValue(r)},parseValue:function(t){return t||0===t||"boolean"===typeof t?t:this.defaultValue},base64ToBlob:function(t,e){var r=window.btoa(window.unescape(encodeURIComponent(t))),a=atob(r),n=a.length,i=new Uint8ClampedArray(n);while(n--)i[n]=a.charCodeAt(n);return new Blob([i],{type:e})}}},tt=Z,et=Object(v["a"])(tt,L,G,!1,null,null,null);et.options.__file="JsonExcel.vue";var rt=et.exports,at={props:["result"],data:function(){return{}},computed:{candles:function(){return this.result.stratCandles||[]},trades:function(){return this.result.trades||[]},indicators:function(){return this.result.stratUpdates||[]}},methods:{genExportable:function(){if(this.candles&&this.candles.length&&this.trades&&this.trades.length){var t=S.a.cloneDeep(this.candles);return S.a.each(this.trades,function(e){var r=S.a.indexOf(t,S.a.find(t,function(t){return t.start===e.date}));r>=0&&S.a.set(t[r],"advice",e.action)}),S.a.each(t,function(t){t.advice||S.a.set(t,"advice","")}),t}return[]}},components:{roundtripTable:N["a"],resultSummary:Y,echart:V["a"],ExcelJson:rt}},nt=at,it=Object(v["a"])(nt,R,$,!1,null,null,null);it.options.__file="result.vue";var st=it.exports,ot=r("469d"),ct={mixins:[ot["a"]],data:function(){return{backtestable:!1,backtestState:"idle",config:!1,candleWriter:null}},created:function(){var t=this;this.$axios.get(this.$store.state.config.apiBaseUrl+"configPart/candleWriter").then(function(e){t.candleWriter=toml.parse(e.data.part)}).catch(function(t){console.log("error getting candlewriter-config",t)})},computed:{backtestResult:function(){return this.$store.getters["backtest/result"]}},methods:{check:function(t){if(this.config=t,!t.valid)return this.backtestable=!1;this.backtestable=!0},run:function(){var t=this;this.backtestState="fetching";this.$axios.post(this.$store.state.config.apiBaseUrl+"backtest",this.config).then(function(e){t.backtestState="fetched",t.$store.dispatch("backtest/setBacktestResult",e.data)}).catch(function(e){console.error(e),t.$q.notify({type:"negative",message:"Error during backtest-fetching of data."}),t.backtestState="error"})},startLiveGekko:function(t){var e=this;this.candleWriter&&(this.config["candleWriter"]=this.candleWriter,this.config["watch"]["candleWriter"]=this.candleWriter),this.config.type=t?"paper trader":"tradebot",t||_.set(this.config,"paperTrader.enabled",!1),this.$q.dialog({title:"Start live "+this.config.type+"?",message:"Do you really want to start a live "+this.config.type+" for "+this.config.watch.currency+"-"+this.config.watch.asset+" on "+this.config.watch.exchange+" with the current backtest settings?",ok:"Yes",cancel:"No"}).then(function(){t||_.set(e.config,"trader.enabled",!0),e.start()})}},components:{configBuilder:E,result:st}},lt=ct,ut=Object(v["a"])(lt,i,s,!1,null,null,null);ut.options.__file="backtester.vue";var dt=ut.exports,ft={name:"BacktesterPage",components:{Backtester:dt}},ht=ft,pt=(r("aed3"),Object(v["a"])(ht,a,n,!1,null,null,null));pt.options.__file="backtest.vue";e["default"]=pt.exports}}]);